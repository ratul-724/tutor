<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Details | AgriConnect</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/common.css">
    <style>
        .product-card {
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .chat-container {
            height: 400px;
            overflow-y: auto;
        }
        .market-header {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                        url('https://images.unsplash.com/photo-1606787366850-de6330128bfc?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 4rem 0;
            border-radius: 20px;
        }
        .rating-stars {
            color: #FFD700;
            font-size: 1.2rem;
        }
        .opening-hours {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
        }

         /* Floating Chat Widget Styles */
         .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9999;
            transition: all 0.3s ease;
        }
        .chat-icon {
            width: 60px;
            height: 60px;
            background-color: #2c8a4f;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }
        
        .chat-icon:hover {
            background-color: #237442;
            transform: scale(1.1);
        }
        
        .chat-icon i {
            font-size: 24px;
        }
        
        .chat-container {
            width: 350px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            display: none;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .chat-container.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }
        
        .chat-header {
            background-color: #2c8a4f;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-header h5 {
            margin: 0;
            font-weight: 600;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
        }
        
        .chat-body {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background-color: #f8f9fa;
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
        }
        
        .received {
            background-color: white;
            border-top-left-radius: 5px;
            align-self: flex-start;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .sent {
            background-color: #2c8a4f;
            color: white;
            border-top-right-radius: 5px;
            align-self: flex-end;
            margin-left: auto;
        }
        
        .message-time {
            font-size: 11px;
            color: #6c757d;
            margin-top: 5px;
            text-align: right;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #eee;
        }
        
        .chat-input input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 10px 15px;
            outline: none;
        }
        
        .chat-input button {
            background-color: #2c8a4f;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .chat-input button:hover {
            background-color: #237442;
        }
        
        /* Typing indicator */
        .typing-indicator {
            display: flex;
            padding: 10px 15px;
            background-color: white;
            border-radius: 18px;
            margin-bottom: 15px;
            width: fit-content;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #6c757d;
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }
        
        /* Responsive adjustments */
        @media (max-width: 576px) {
            .chat-widget {
                bottom: 20px;
                right: 20px;
            }
            
            .chat-container {
                width: 300px;
            }
        }
    </style>
</head>
<body>
    <header id="header"></header>

    <!-- Market Header -->
    <div class="container text-center mb-5">
        <div class="market-header">
            <h1 class="display-4 fw-bold">Fresh Produce Market</h1>
            <p class="lead mb-4"><i class="fas fa-map-marker-alt me-2"></i> Downtown District, Main Square</p>
            <div class="rating-stars mb-3">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <span class="ms-2">4.7 (128 reviews)</span>
            </div>
            <div class="d-flex justify-content-center gap-3">
                <button class="btn btn-light rounded-pill px-4">
                    <i class="fas fa-share-alt me-2"></i> Share
                </button>
                <button class="btn btn-success rounded-pill px-4">
                    <i class="fas fa-heart me-2"></i> Save
                </button>
                <button class="btn btn-warning rounded-pill px-4">
                    <i class="fas fa-directions me-2"></i> Directions
                </button>
            </div>
        </div>
    </div>

    <div class="container mb-5">
        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-8">
                <!-- About Section -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title mb-4"><i class="fas fa-info-circle text-success me-2"></i> About This Market</h3>
                        <p class="card-text">The Fresh Produce Market has been serving the community since 1995, offering the freshest locally-sourced fruits, vegetables, and dairy products. We work directly with farmers to bring you the best quality at fair prices.</p>
                        <div class="row mt-4">
                            <div class="col-md-6 mb-3">
                                <h5><i class="fas fa-award text-success me-2"></i> Specialties</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item border-0 ps-0">Organic vegetables</li>
                                    <li class="list-group-item border-0 ps-0">Seasonal fruits</li>
                                    <li class="list-group-item border-0 ps-0">Farm-fresh eggs</li>
                                    <li class="list-group-item border-0 ps-0">Artisanal cheeses</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h5><i class="fas fa-certificate text-success me-2"></i> Certifications</h5>
                                <div class="d-flex flex-wrap gap-2">
                                    <span class="badge bg-success bg-opacity-10 text-success">Organic Certified</span>
                                    <span class="badge bg-primary bg-opacity-10 text-primary">Local First</span>
                                    <span class="badge bg-warning bg-opacity-10 text-warning">Sustainable</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reviews Section -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body">
                        <h3 class="card-title mb-4"><i class="fas fa-star text-success me-2"></i> Customer Reviews</h3>
                        
                        <!-- Review 1 -->
                        <div class="mb-4 pb-3 border-bottom">
                            <div class="d-flex justify-content-between mb-2">
                                <div>
                                    <h5 class="mb-0">Sarah Johnson</h5>
                                    <div class="rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                                <small class="text-muted">2 weeks ago</small>
                            </div>
                            <p class="mb-2">The freshest produce in town! I come here every Saturday morning. The tomatoes are especially delicious.</p>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-outline-success">Helpful</button>
                                <button class="btn btn-sm btn-outline-secondary">Comment</button>
                            </div>
                        </div>
                        
                        <!-- Review 2 -->
                        <div class="mb-4 pb-3 border-bottom">
                            <div class="d-flex justify-content-between mb-2">
                                <div>
                                    <h5 class="mb-0">Michael Chen</h5>
                                    <div class="rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                </div>
                                <small class="text-muted">1 month ago</small>
                            </div>
                            <p class="mb-2">Great selection of organic vegetables. Prices are a bit high but you get what you pay for - excellent quality.</p>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-outline-success">Helpful</button>
                                <button class="btn btn-sm btn-outline-secondary">Comment</button>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button class="btn btn-outline-success rounded-pill px-4">
                                <i class="fas fa-pen me-2"></i> Write a Review
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4 z-n1">
                <!-- Contact & Hours -->
                <div class="card mb-4 border-0 shadow-sm sticky-top" style="top: 20px;">
                    <div class="card-body">
                        <h4 class="card-title mb-4"><i class="fas fa-clock text-success me-2"></i> Opening Hours</h4>
                        <div class="opening-hours">
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Monday</span>
                                <span>6:00 AM - 6:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Tuesday</span>
                                <span>6:00 AM - 6:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Wednesday</span>
                                <span>6:00 AM - 6:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Thursday</span>
                                <span>6:00 AM - 6:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Friday</span>
                                <span>6:00 AM - 6:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2 border-bottom">
                                <span>Saturday</span>
                                <span>7:00 AM - 5:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between py-2">
                                <span>Sunday</span>
                                <span>Closed</span>
                            </div>
                        </div>

                        <h4 class="card-title mt-4 mb-3"><i class="fas fa-phone-alt text-success me-2"></i> Contact</h4>
                        <p class="mb-1"><i class="fas fa-phone me-2 text-success"></i> (555) 123-4567</p>
                        <p class="mb-3"><i class="fas fa-envelope me-2 text-success"></i> info@freshproducemarket.com</p>
                        
                        <h4 class="card-title mt-4 mb-3"><i class="fas fa-map-marker-alt text-success me-2"></i> Location</h4>
                        <p class="mb-3">123 Market Street, Downtown District</p>
                        <div class="ratio ratio-16x9 mb-3">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.215573291234!2d-73.9878449242391!3d40.7484409713896!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259a9b3117469%3A0xd134e199a405a163!2sEmpire%20State%20Building!5e0!3m2!1sen!2sus!4v1690834234473!5m2!1sen!2sus" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                        <button class="btn btn-success w-100 rounded-pill">
                            <i class="fas fa-directions me-2"></i> Get Directions
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Chat Widget -->
    <div class="chat-widget">
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <h5>Van #FD-2541</h5>
                <button class="chat-close" id="chatClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-body" id="chatBody">
                <!-- Messages will appear here -->
                <div class="d-flex flex-column">
                    <div class="message received">
                        Hello! How can I help you today?
                        <div class="message-time">10:30 AM</div>
                    </div>
                    
                    <!-- Typing indicator (shown when agent is typing) -->
                    <!-- <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div> -->
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type your message...">
                <button id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
        
        <div class="chat-icon" id="chatIcon">
            <i class="fas fa-comment-dots"></i>
        </div>
    </div>

    <footer id="footer"></footer>

    <script src="js/common.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Chat Widget Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const chatIcon = document.getElementById('chatIcon');
            const chatContainer = document.getElementById('chatContainer');
            const chatClose = document.getElementById('chatClose');
            const chatBody = document.getElementById('chatBody');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            let isChatOpen = false;
            // Toggle chat window
            function toggleChat() {
                isChatOpen = !isChatOpen;
                if (isChatOpen) {
                    chatContainer.classList.add('active');
                    messageInput.focus();
                    chatIcon.classList.add('d-none');
                } else {
                    chatContainer.classList.remove('active');
                    chatIcon.classList.remove('d-none');
                }
            }
            // Send message
            function sendMessage() {
                const messageText = messageInput.value.trim();
                if (messageText === '') return;
                // Add user message to chat
                addMessage(messageText, 'sent');
                messageInput.value = '';
                // Simulate reply after 1-2 seconds
                setTimeout(() => {
                    // Show typing indicator
                    const typingIndicator = document.createElement('div');
                    typingIndicator.className = 'typing-indicator';
                    typingIndicator.innerHTML = `
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    `;
                    chatBody.querySelector('.d-flex').appendChild(typingIndicator);
                    chatBody.scrollTop = chatBody.scrollHeight;
                    // Remove typing indicator and add reply after delay
                    setTimeout(() => {
                        typingIndicator.remove();
                        const replies = [
                            "Thanks for your message! How can I assist you further?",
                            "I'll check that for you right away.",
                            "Our team will get back to you shortly.",
                            "Is there anything else you'd like to know?",
                            "I'm here to help with any questions you have."
                        ];
                        const randomReply = replies[Math.floor(Math.random() * replies.length)];
                        addMessage(randomReply, 'received');
                    }, 1500);
                }, 1000 + Math.random() * 1000);
            }
            // Add message to chat
            function addMessage(text, type) {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                messageDiv.innerHTML = `
                    ${text}
                    <div class="message-time">${timeString}</div>
                `;
                chatBody.querySelector('.d-flex').appendChild(messageDiv);
                chatBody.scrollTop = chatBody.scrollHeight;
            }
            // Event listeners
            chatIcon.addEventListener('click', toggleChat);
            chatClose.addEventListener('click', toggleChat);
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            // Auto-open chat if there are unread messages (you would implement this logic)
            // For example, check localStorage or a server endpoint
            const hasUnreadMessages = false; // Change based on your logic
            if (hasUnreadMessages) {
                toggleChat();
            }
        });
    
    </script>
</body>
</html>